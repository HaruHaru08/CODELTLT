<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Happy Birthday üéÇ</title>
    <style>
      body {
        margin: 0;
        background: #000;
        overflow: hidden;
        color: #fff;
        font-family: "Comic Sans MS", cursive, sans-serif;
      }
      canvas {
        display: block;
      }
      #countdown {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 120px;
        color: #ff69b4;
        text-shadow: 0 0 20px #fff, 0 0 30px #ff69b4;
        z-index: 10;
      }
      #main-text {
        position: absolute;
        top: 30%;
        width: 100%;
        text-align: center;
        font-size: 60px;
        color: #ff69b4;
        text-shadow: 2px 2px 8px rgba(255, 255, 255, 0.7);
        z-index: 5;
        display: none;
      }
      #wish {
        position: absolute;
        top: 45%;
        width: 100%;
        text-align: center;
        font-size: 28px;
        color: #fff;
        text-shadow: 1px 1px 6px rgba(255, 105, 180, 0.8);
        z-index: 5;
        display: none;
      }
      /* Container ·∫£nh */
      #gift-container {
        position: absolute;
        bottom: 5%;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 20px; /* kho·∫£ng c√°ch gi·ªØa ·∫£nh */
        z-index: 6;
        display: none;
      }
      .gift-card {
        opacity: 0;
        transform: scale(0);
        transition: all 0.8s ease;
      }
      .gift-card img {
        width: 180px; /* chi·ªÅu r·ªông c·ªë ƒë·ªãnh */
        height: 200px; /* chi·ªÅu cao c·ªë ƒë·ªãnh */
        object-fit: cover; /* c·∫Øt ·∫£nh cho v·ª´a khung, kh√¥ng m√©o */
        border-radius: 12px;
        box-shadow: 0 0 20px rgba(255, 105, 180, 0.8);
        transition: transform 0.4s ease, box-shadow 0.4s ease;
      }
      .gift-card img:hover {
        transform: scale(1.1); /* ph√≥ng to nh·∫π khi hover */
        box-shadow: 0 0 30px rgba(255, 105, 180, 1);
      }
      .gift-card.show {
        opacity: 1;
        transform: scale(1);
      }
    </style>
  </head>
  <body>
    <canvas id="matrix"></canvas>
    <div id="countdown">3</div>
    <div id="main-text"></div>
    <div id="wish"></div>

    <!-- Container hi·ªÉn th·ªã ·∫£nh th·∫≥ng h√†ng -->
    <div id="gift-container">
      <div class="gift-card">
        <img
          src="https://scontent.fhan18-1.fna.fbcdn.net/v/t39.30808-6/467307192_122126299358495652_2502548724927930480_n.jpg?_nc_cat=104&ccb=1-7&_nc_sid=a5f93a&_nc_ohc=BJCG_bHu8vAQ7kNvwGl_LmT&_nc_oc=AdlgnHrFww-pc78oG8edLydp1vwqWwqtTrktVRQ88OqH318uFjUROiV5ajLxoS9zC7o&_nc_zt=23&_nc_ht=scontent.fhan18-1.fna&_nc_gid=T0HO5KZ3hw7b_zG3XVaxXA&oh=00_AfVJxMKn6vThcvzwpw15A5McHJmWedBd9wOKnqXqGHi2aw&oe=68B021EC"
        />
      </div>
      <div class="gift-card">
        <img src="./902d627302ea8ab4d3fb4.jpg" />
      </div>
      <div class="gift-card">
        <img src="./30777a231aba92e4cbab3.jpg" />
      </div>
      <div class="gift-card">
        <img src="./c6238c40ecd964873dc81.jpg" />
      </div>
      <div class="gift-card">
        <img src="./c8c3afaccf35476b1e242.jpg" />
      </div>
    </div>

    <!-- Nh·∫°c n·ªÅn Happy Birthday (ƒê√É ƒê·ªîI audio -> video) -->
    <video id="bgm" autoplay loop muted playsinline style="display: none">
      <source src="./0824.mp4" type="video/mp4" />
      Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ ph√°t nh·∫°c.
    </video>

    <script>
      const canvas = document.getElementById("matrix");
      const ctx = canvas.getContext("2d");
      canvas.height = window.innerHeight;
      canvas.width = window.innerWidth;

      const letters = "HAPPY BIRTHDAY".split("");
      const fontSize = 20;
      const columns = canvas.width / fontSize;
      const drops = [];
      for (let x = 0; x < columns; x++)
        drops[x] = Math.random() * canvas.height;

      function drawRain() {
        ctx.fillStyle = "rgba(0, 0, 0, 0.1)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "#ff69b4";
        ctx.font = fontSize + "px monospace";
        for (let i = 0; i < drops.length; i++) {
          const text = letters[Math.floor(Math.random() * letters.length)];
          ctx.fillText(text, i * fontSize, drops[i] * fontSize);
          if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
            drops[i] = 0;
          }
          drops[i]++;
        }
      }

      setInterval(drawRain, 33);

      // ƒê·∫øm ng∆∞·ª£c
      let count = 3;
      const cdEl = document.getElementById("countdown");
      const mainText = document.getElementById("main-text");
      const wishEl = document.getElementById("wish");
      const giftContainer = document.getElementById("gift-container");

      const countdownInterval = setInterval(() => {
        count--;
        if (count > 0) {
          cdEl.textContent = count;
        } else {
          clearInterval(countdownInterval);
          cdEl.style.display = "none";

          // ===== B·∫¨T NH·∫†C SAU KHI ƒê·∫æM NG∆Ø·ª¢C XONG =====
          const bgm = document.getElementById("bgm");
          bgm.muted = false;
          bgm.play().catch(() => {
            // n·∫øu v·∫´n b·ªã ch·∫∑n, s·∫Ω ph√°t khi ng∆∞·ªùi d√πng t∆∞∆°ng t√°c
          });
          // ============================================

          // Hi·ªán Happy Birthday t·ª´ng ch·ªØ
          showMainText("HAPPY BIRTHDAY");

          // Hi·ªán l·ªùi ch√∫c
          setTimeout(() => {
            showWish(
              "Ch√∫c c·∫≠u c√≥ m·ªôt ng√†y sinh nh·∫≠t th·∫≠t vui v·∫ª, h·∫°nh ph√∫c v√† tr√†n ng·∫≠p y√™u th∆∞∆°ng! üíñüéÇüéâüåô‚úåÔ∏èü•ö"
            );
          }, 4000);

          setTimeout(() => {
            showWish(
              "Ch√∫c c·∫≠u tu·ªïi m·ªõi ng√†y c√†ng xinh ƒë·∫πp v√† ƒë·∫°t ƒë∆∞·ª£c nh·ªØng ƒëi·ªÅu m√¨nh mong mu·ªën üéÄ‚ú®"
            );
          }, 11000);
          // Hi·ªán ·∫£nh th·∫≥ng h√†ng sau l·ªùi ch√∫c
          setTimeout(() => {
            giftContainer.style.display = "flex";
            const cards = document.querySelectorAll(".gift-card");
            cards.forEach((card, i) => {
              setTimeout(() => {
                card.classList.add("show");
              }, i * 300);
            });
          }, 16500);
        }
      }, 1000);

      // Typing cho d√≤ng ch√≠nh
      function showMainText(text) {
        mainText.style.display = "block";
        let i = 0;
        function typing() {
          if (i < text.length) {
            mainText.textContent += text[i++];
            setTimeout(typing, 400);
          }
        }
        typing();
      }

      // Typing cho l·ªùi ch√∫c
      function showWish(text) {
        wishEl.style.display = "block";

        // t·∫°o <p> m·ªõi cho m·ªói l·ªùi ch√∫c
        const p = document.createElement("p");
        wishEl.appendChild(p);

        let i = 0;
        function typing() {
          if (i < text.length) {
            p.textContent += text[i++];
            setTimeout(typing, 80);
          }
        }
        typing();
      }

      // Fallback: n·∫øu autoplay v·∫´n b·ªã ch·∫∑n, click 1 c√°i s·∫Ω ph√°t
      document.addEventListener("click", () => {
        const bgm = document.getElementById("bgm");
        bgm.muted = false;
        bgm.play().catch(() => {});
      });
    </script>
  </body>
</html>
